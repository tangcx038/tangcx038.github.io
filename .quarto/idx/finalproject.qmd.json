{"title":"Interactive Map","markdown":{"yaml":{"title":"","runtime":"shiny","output":"html_document"},"headingText":"Interactive Map","containsRefs":false,"markdown":"\n\n\n```{r setup, include=FALSE}\nlibrary(shiny)\nlibrary(flexdashboard)\nlibrary(tidyverse)\nlibrary(highcharter)\nlibrary(gt)\nlibrary(htmltools)\nlibrary(viridis)\nlibrary(maps)\nlibrary(sf)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(quarto)\nlibrary(RColorBrewer)\nlibrary(ggiraph)\nlibrary(readr)\nlibrary(knitr)\nlibrary(sqldf)\n```\n\n```{=html}\n<link rel=\"stylesheet\" href=\"./_site/styles.css\">\n\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n<section class=\\\"image-container\\\">\n  <img src=\\\"delicious-vietnamese-food-including-pho-ga-noodles-spring-rolls-white-table.jpg\\\" style=\\\"width:100%;height:300px;object-fit:cover;\\\"/>\n  <h2 class=\\\"center-text-bg-img\\\">Unveiling the true severity of food waste</h2>\n  <p class=\\\"bottom-right-text-bg-img\\\">Image by [Freepik](https://www.freepik.com/free-photo/delicious-vietnamese-food-including-pho-ga-noodles-spring-rolls-white-table_13702315.htm)</p>\n</section>\n\n<section id=\\\"introduction\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h4 class=\\\"text-center fw-bold my-5\\\">Introduction</h4>\n  <p>Food comes from a long journey, starting with the farmer and ending up in our homes. This journey, called the supply chain, uses a lot of the Earth's resources. When we sit down to eat, we get to enjoy the amazing result. Tradition and good cooking bring us tasty, nourishing, joyful, passionate, and life-giving meals. However, the sad truth is that we throw away a ton of our food—loads of it! And when we do that, we're also tossing away all the valuable resources that were essential to make it in the first place.</p>\n\n  <p>**WASTING FOOD IS WASTING AGRICULTURAL LAND.** The food produced but wasted globally every year requires 1.4 billion hectares of land, which is close to 30% of the world agricultural land area (UNEP, 2022).</p>\n\n  <p>**WASTING FOOD IS WASTING MONEY.** Besides its environmental cost, food wastage also represents a loss of economic value. On a global scale, the economic cost of the overall amount of food wastage is about $US 750 billion, equivalent to the GDP of Switzerland (FAO, 2011).</p>\n\n  <h3 id=\\\"\\\" class=\\\"text-center fw-bold my-5\\\">Wondering how much <div class=\\\"foodwasteword\\\">food is wasted across the world?</div></h3>\n  <p>According to the **United Nations' Food and Agricultural Organisation of United Nation (FAO)**, an estimation of all the food produced every year for human consumption in the world, one-third does not reach our stomachs.</p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\ncreateInteractiveMap <- function(data_file, map_resolution = \"world\") {\n  # Import the data with coordinates\n  world_map <- map_data(map_resolution)\n  accesstonet <- read.csv(data_file)\n  map_data <- accesstonet %>% rename(region = country)\n\n  map <- left_join(world_map, map_data, by = \"region\")\n\n  # Create the ggplot object\n  gg <- ggplot(map, aes(long, lat, group = group, text = paste(\"Country: \", region, \"<br>Annual Kg per Capita: \", FoodWaste2021kgcapitayear))) +\n    geom_polygon(aes(fill = FoodWaste2021kgcapitayear), color = \"white\", size = 0.03) +\n    scale_fill_gradient(low = \"lightgreen\", high = \"darkgreen\") +\n    theme_minimal()\n\n  # Convert ggplot to plotly with specified width and height\n  map_plotly <- ggplotly(gg, tooltip = \"text\", width = 1000, height = 600)\n\n  # Set scrollZoom to FALSE\n  map_plotly$x$layout$updatemenus <- list(list(type = \"zoom\",\nshowactive = FALSE,\nbuttons = list(list(args = list(\"zoomType\", \"zoomin\"),\nlabel = \"Zoom In\",\nmethod = \"relayout\"),\nlist(args = list(\"zoomType\", \"zoomout\"),\nlabel = \"Zoom Out\",\nmethod = \"relayout\")),\ndirection = \"left\",\npad = list(r = 10, t = 87),\nshowactive = FALSE,\ntype = \"buttons\",\nx = 0.1,\ny = 1))\n\n  # Display the interactive map\n  return(map_plotly)\n}\n\ninteractiveMap <- createInteractiveMap(\"food-waste-by-country-2023.csv\")\n\ninteractiveMap\n```\n\n```{r, results='asis', echo=FALSE}\n\ncat(\"\n  <h4 id=\\\"\\\" class=\\\"text-center fw-bold my-5\\\"> <span class=\\\"foodwasteword\\\">WASTING FOOD</span> IS CONTRIBUTING TO <span class=\\\"foodwasteword\\\"> GLOBAL WARMING</span></h4>\n\n\n  \n  <p><p> The carbon footprint of food wasted globally every year is 3.3 billion tonnes of carbon dioxide. **If food waste was a country, it would be the third top emitter after the USA and China (FAO, 2011).**</p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n\n# Load data\nemissions_from_food <- read.csv(\"emissions-from-food.csv\")\n\nemissions_from_food <- emissions_from_food %>% \n  mutate(country = case_when(Entity == \"United States\" ~ \"USA\",\n                             Entity == \"United Kingdom\" ~ \"UK\",\n                             Entity == \"Czechia\" ~ \"Czech Republic\",\n                             Entity == \"Democratic Republic of Congo\" ~ \"Democratic Republic of the Congo\",\n                             TRUE ~ Entity))\n\nworld_map <- map_data(\"world\")\n\nworld_emissions_map <- emissions_from_food %>% \n  filter(country != \"World\") %>% \n  left_join(world_map, by = c(\"country\" = \"region\"))\n\nmap <- world_emissions_map %>% \n  filter(Year == 2015) %>% \n  ggplot(aes(x = long, y = lat, group = group)) +\n  geom_polygon_interactive(aes(fill = `Food_emissions_by_country`, tooltip = `Food_emissions_by_country`), \n                           color = \"black\", size = 0.2) +\n  labs(\n    title = \"Greenhouse gas emisisons from food systems\",\n    caption = \"Source: Crippa et al. (2021). Food systems are responsible for a third of global anthropogenic GHG emissions. \nNature Food.\nOurWorldInData.org/environmental-impacts-of-food ● CC BY\"\n  ) +\n  scale_fill_binned(low = \"darkseagreen1\", high = \"seagreen\", \n                    breaks = c(10000000, 50000000, 100000000, 500000000, 1000000000),\n                    label = c(\"10 million t\", \"50 million t\", \"100 million t\", \"500 million t\", \"1 billion t\"),\n                    guide = guide_colorsteps(barheight = unit(0.1, \"in\"), barwidth = unit(6, \"in\"))) +\n  theme_void() +\n  theme(\n    plot.title = element_text(color = \"gray20\", family = \"serif\", size = 20),\n    plot.caption = element_text(color = \"gray20\", size = 8, hjust = 0),\n    legend.position = \"bottom\",\n    legend.title = element_blank()\n  ) \n\nmap\n```\n\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The map tells us about how much greenhouse gas comes from making and eating food in different countries. In 2021, the countries causing the most emissions, over a billion tons, are the U.S., Brazil, India, Indonesia, and China. These are the same countries that were on the list from 1990 to 2021 for having the most greenhouse gas emissions from their food systems.</p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\nshare_food_emissions <- read_csv(\"share-global-food-emissions.csv\")\n\nshare_emissions_plot <- share_food_emissions %>% \n  filter(Year >= 1990, Entity %in% c(\"China\", \"Indonesia\", \"United States\", \"Brazil\", \n                                     \"India\", \"Argentina\", \"Mexico\")) %>% \n  ggplot(aes(x = Year, y = `Share of global food emissions`, group = Entity, \n             color = fct_reorder2(Entity, Year, `Share of global food emissions`))) +\n  geom_line() +\n  geom_point_interactive(aes(tooltip = `Share of global food emissions`, data_id = Entity)) +\n  labs(    \n    title = \"Share of global food emissions\",\n    subtitle = \"Food system emissions quantified on the basis of food production, not consumption.\",\n    caption = \"Source:OurWorldInData.org/environmental-impacts-of-food ● CC BY\"\n  ) +\n  scale_y_continuous(\n    breaks = c(0, 2, 4, 6, 8, 10, 12, 14),\n    labels = c(\"0\" = \"0%\", \"2\" = \"2%\", \"4\" = \"4%\", \"6\" = \"6%\",\n               \"8\" = \"8%\", \"10\" = \"10%\", \"12\" = \"12%\", \"14\" = \"14%\")\n  ) +\n  theme_minimal() +\n  theme(\n    axis.title = element_blank(),\n    axis.text = element_text(size = 3),\n    legend.title = element_blank(),\n    axis.line.x = element_line(color = \"light gray\", size = 0.75),\n    panel.grid.major.y = element_line(colour = \"light gray\", size=0.5, linetype = \"dashed\"),\n    panel.grid.major.x = element_blank(),\n    plot.margin = margin(1, 1, 1, 1, \"cm\")\n  )\n\ngirafe(ggobj = share_emissions_plot)\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>This chart provides insights into how food production affects the environment, specifically focusing on greenhouse gas emissions. It illustrates the percentage of a country's emissions from food systems in comparison to the global total from 1990 to 2015. China's emissions steadily increased during this period, rising from 10% to 14%, making it the top contributor from 2005 to 2015. Brazil and Indonesia experienced fluctuations but ultimately reduced their shares to around 7% and 9% in 2015. The U.S. contributed between 7.5% and 10%, while India saw a slight increase from 5% to 6%. Argentina maintained a consistent 2%, and Mexico had the smallest share at around 1%. The graph highlights the intricate environmental impact of food systems, involving various activities from farming and land use changes to the entire supply chain, including transportation, packaging, processing, retail, cooking, and waste management. Importantly, these figures focus on emissions tied to food production, emphasizing the need for sustainable practices throughout the entire food production and distribution process to address their environmental impact.</p>\n</section>\n\")\n```\n\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n<section class=\\\"image-container\\\">\n  <img src=\\\"tasty-food-arrangement-top-view.jpg\\\" style=\\\"width:100%;height:300px;object-fit:cover;\\\"/>\n  <h5 class=\\\"center-text-bg-img\\\">Food Waste in Singapore</h5>\n  <p class=\\\"bottom-right-text-bg-img\\\">Image by [Freepik](https://www.freepik.com/free-photo/tasty-food-arrangement-top-view_20552615.htm#query=food%20packages&position=23&from_view=search&track=ais&uuid=93342a26-4a2a-4889-a4e0-fad38046c4af)</p>\n</section>\n\n  <p>We keep asking the Earth for more stuff, make more things, and end up throwing away a lot. We're using up natural resources faster than they can come back, especially to make food that doesn't even get eaten.\n\nRich countries like Singapore are a part of this. The graph shows more and **more food factories** in recent years. When we make **more food**, we also potentially **waste more**.</p>\n</section>\n<section id=\\\"Zooming into our home country Singapore\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h3 class=\\\"text-center fw-bold my-5\\\">Zooming into our home country Singapore</h3>\n\")\n\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Load the required library\nlibrary(plotly)\n\n# Read the CSV file\nfoodfactories_sg <- read.csv(\"LicensedFoodFactoriesEndOfPeriodAnnual.csv\")\n\n# Create an interactive spline plot with points\nspline_plot <- plot_ly(foodfactories_sg, x = ~year, y = ~no_of_food_factories, type = 'scatter', mode = 'lines+markers',\n                       line = list(shape = 'spline'),\n                       text = ~paste(\"Year: \", year, \"<br>No of food factories: \", no_of_food_factories),\n                       hoverinfo = 'text') %>%\n  layout(title = \"Number of Food Factories Over Time (Spline Plot with Points)\",\n         xaxis = list(title = \"Year\"),\n         yaxis = list(title = \"Number of Food Factories\"))\n\n# Display the interactive spline plot with points\nspline_plot\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The graph depicting the number of food factories across the years reveals a consistent upward trend, with a notable increase in 2020 from 1850 to 1940, marking a positive growth pattern. This steady expansion may be indicative of a resilient and growing food industry, potentially influenced by economic factors, population growth, and shifting consumer preferences. The successive yearly increments, such as in 2019 (1850 factories), 2018 (1802), 2017 (1755), and 2016 (1678), underscore a sustained positive trajectory. The substantial rise in 2020 could be linked to increased demand. However, this growth also raises considerations about the potential for food surplus and waste as increased production may outpace demand. </p>\n</section>\n\")\n```\n\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Reading the CSV files\nwaste_03_22 <- read.csv('2003_2022_waste.csv')\n\nenergy_stat <- read.csv('waste_energy_stat.csv')\n\n\n# Renaming columns and mutating the data to convert values from kilo-tonnes to tonnes\nclean_waste_03_22 <- waste_03_22 %>%\n  rename(\n    waste_type = \"waste_type\",\n    total_waste_generated_tonne = \"total_generate_1k_tonnes\",\n    total_waste_recycled_tonne = \"total_recycled_1k_tonnes\",\n    total_waste_not_recycled_tonne = \"total_not_recycled_1k_tonnes\",\n    year = \"year\"\n  ) %>%\n  mutate(\n    total_waste_generated_tonne = total_waste_generated_tonne * 1000,\n    total_waste_recycled_tonne = total_waste_recycled_tonne * 1000\n  )\n\n# Filtering waste_03_22 dataset for specific years and waste types\nwasteselected <- clean_waste_03_22 %>%\n  filter(year %in% 2003:2022,\n         waste_type %in% c(\"Plastics\", \"Ferrous Metals\", \"Non-Ferrous Metals\", \"Glass\", \"Food\"))%>%\n  arrange(waste_type)\n\n  \n### Calculating and adding recycling rate into DataFrame for analysis.\n\n# Calculate recycling_rate and round to 2 decimal places\nclean_waste_03_22$recycling_rate <- round(\n  clean_waste_03_22$total_waste_recycled_tonne / clean_waste_03_22$total_waste_generated_tonne,2\n)\n\n### Calculating and adding wasting rate into DataFrame for analysis.\n\n# Calculate wasting_rate and round to 2 decimal places\nclean_waste_03_22$wasting_rate <- round(\n  1-clean_waste_03_22$recycling_rate,2\n)\n\n# Reading the CSV files\nwaste_03_22 <- read.csv('2003_2022_waste.csv')\n\n# Renaming columns and mutating the data to convert values from kilo-tonnes to tonnes\nclean_waste_03_22 <- waste_03_22 %>%\n  rename(\n    waste_type = \"waste_type\",\n    total_waste_generated_tonne = \"total_generate_1k_tonnes\",\n    total_waste_recycled_tonne = \"total_recycled_1k_tonnes\",\n    total_waste_not_recycled_tonne = \"total_not_recycled_1k_tonnes\",\n    year = \"year\"\n  ) %>%\n  mutate(\n    total_waste_generated_tonne = total_waste_generated_tonne * 1000,\n    total_waste_recycled_tonne = total_waste_recycled_tonne * 1000\n  )\n\n# Define UI for the Shiny app\nui <- fluidPage(\n  titlePanel(\"Waste Visualization App\"),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\"material\", \"Choose Material:\", \n                  choices = unique(clean_waste_03_22$waste_type),\n                  selected = \"Plastics\")\n    ),\n    mainPanel(\n      plotlyOutput(\"waste_plot\")\n    )\n  )\n)\n\n# Define server logic for the Shiny app\nserver <- function(input, output) {\n  \n  # Filter data based on selected material\n  selected_data <- reactive({\n    clean_waste_03_22 %>%\n      filter(waste_type == input$material)\n  })\n  \n  # Render the plot\n  output$waste_plot <- renderPlotly({\n    gg <- ggplot(selected_data(), aes(x = year)) +\n      geom_line(aes(y = total_waste_generated_tonne, color = \"Waste Generated\"), size = 1) +\n      geom_line(aes(y = total_waste_recycled_tonne, color = \"Waste Recycled\"), size = 1) +\n      geom_line(aes(y = total_waste_not_recycled_tonne, color = \"Waste Not Recycled\"), size = 1) +\n      labs(title = paste(\"Waste Over Years -\", input$material),\n           x = \"Year\", y = \"Tonnes\") +\n      theme_minimal()\n    \n    ggplotly(gg, tooltip = \"text\")\n  })\n}\n\n# Run the Shiny app\nshinyApp(ui, server)\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The Shiny interactive chart vividly illustrates the significant impact of food waste as a substantial contributor to overall waste in Singapore. With a considerable amount of food waste being generated, the visualization exposes a concerning trend where a substantial portion is not being effectively recycled. Instead, a high volume of food is disposed of, contributing to environmental concerns. The interactive features of the chart empower users to delve into the intricate details of waste management by exploring and selecting various materials. This exploration unveils the distinct quantities of each material being generated, disposed of, and recycled in Singapore, shedding light on the urgency of addressing food waste management practices for a more sustainable and environmentally conscious future. </p>\n</section>\n\")\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n<section class=\\\"image-container\\\">\n  <img src=\\\"eco-concept-light-bulb-grow-grass.jpg\\\" style=\\\"width:100%;height:300px;object-fit:cover;\\\"/>\n  <h5 class=\\\"center-text-bg-img\\\">Resourceful Waste by Recycling </h5>\n  <p class=\\\"bottom-right-text-bg-img\\\">Image by [Freepik](https://www.freepik.com/free-photo/eco-concept-light-bulb-grow-grass_1010173.htm#query=energy&position=13&from_view=search&track=sph&uuid=c286c868-23bf-4a6f-bba7-5d858706e964)</p>\n</section>\n\n  <p>Imagine the transformative power of a collective commitment to recycling. Let's delve into Singapore's recycling and waste rates, envisioning a future where each small act of recycling contributes to a monumental impact. </p>\n</section>\n<section id=\\\"Zooming into our home country Singapore\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h3 class=\\\"text-center fw-bold my-5\\\">What if we start recycling?</h3>\n\")\n\n```\n\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Read the CSV file\nclean_waste_03_22 <- read.csv('2003_2022_waste.csv') %>%\n  rename(\n    waste_type = \"waste_type\",\n    total_waste_generated_tonne = \"total_generate_1k_tonnes\",\n    total_waste_recycled_tonne = \"total_recycled_1k_tonnes\",\n    total_waste_not_recycled_tonne = \"total_not_recycled_1k_tonnes\",\n    year = \"year\"\n  ) %>%\n  mutate(\n    total_waste_generated_tonne = total_waste_generated_tonne * 1000,\n    total_waste_recycled_tonne = total_waste_recycled_tonne * 1000,\n    recycling_rate = round(total_waste_recycled_tonne / total_waste_generated_tonne, 2),\n    wasting_rate = round(1 - recycling_rate, 2)\n  )\n\n# Define UI for the Shiny app\nui <- fluidPage(\n  titlePanel(\"Recycling and Wasting Rates Visualization App\"),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\"material\", \"Choose Material:\",\n                  choices = unique(clean_waste_03_22$waste_type),\n                  selected = \"Plastics\")\n    ),\n    mainPanel(\n      plotlyOutput(\"rate_plot\")\n    )\n  )\n)\n\n# Define server logic for the Shiny app\nserver <- function(input, output) {\n  \n  # Filter data based on selected material\n  selected_data <- reactive({\n    clean_waste_03_22 %>%\n      filter(waste_type == input$material)\n  })\n  \n  # Render the plot\n  output$rate_plot <- renderPlotly({\n    gg <- ggplot(selected_data(), aes(x = year)) +\n      geom_line(aes(y = recycling_rate, color = \"Recycling Rate\"), size = 1) +\n      geom_line(aes(y = wasting_rate, color = \"Wasting Rate\"), size = 1) +\n      labs(title = paste(\"Recycling and Wasting Rates Over Years -\", input$material),\n           x = \"Year\", y = \"Rate\") +\n      theme_minimal()\n    \n    ggplotly(gg, tooltip = \"text\")\n  })\n}\n\n# Run the Shiny app\nshinyApp(ui, server)\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The Shiny interactive chart provides a comprehensive visualization of wasting and recycling rates for various types of waste. Notably, the lines representing the rates for food and plastics reveal a concerning trend—they do not intersect. This lack of intersection indicates that concerted efforts to recycle these common types of waste, namely food and plastics, are currently insufficient. The implications are significant, as effective recycling of these materials could have a substantial positive impact on waste management and environmental sustainability. </p>\n</section>\n\")\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>A bit of information regarding this segment:\n  NUS researchers are at the forefront of addressing Singapore's food waste challenges, with approximately 10% of total waste attributed to discarded food and a recycling rate of around 14%. Headed by Associate Professor Tong Yen Wah from NUS Faculty of Engineering's Department of Chemical and Biomolecular Engineering, a collaboration with Shanghai Jiao Tong University has led to the development of an innovative anaerobic digester system. This system efficiently converts food scraps into electrical energy, heat, and fertilizers, forming a self-sustaining cycle as the generated electricity and heat power the entire process.\n\nOperating like a biochemical stomach, the anaerobic digester breaks down organic matter in an oxygen-free environment. Designed by Dr. Zhang Jingxin from NUS Environmental Research Institute (NERI), the system utilizes anaerobic micro-organisms to convert food waste into biogas, subsequently transformed into heat and electrical energy. The repurposed heat is used to produce hot water, maintaining the optimal temperature for digestion. Every component of the system, from sensors to ventilating fans, is powered by electricity generated within.\n\nAccording to the team's calculations, one tonne of food waste can generate between 200 to 400 kilowatt-hours of electricity, contingent on waste composition. The anaerobic digester also yields nutrient-rich digestate, converting about 80% of fed food waste, which can be further processed into liquid fertilizers for agricultural use. </p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Load the necessary libraries\nlibrary(plotly)\n\n# Read the CSV file\ndata <- read.csv('energy_saved_stat.csv')\n\n# Create an interactive doughnut chart\nplot <- plot_ly(data, \n                labels = ~waste_type, \n                values = ~total_energy_saved2,\n                type = 'pie',\n                hole = 0.4,  # Set the size of the hole for a doughnut effect\n                textinfo = 'label+percent',\n                hoverinfo = 'text+value',\n                text = ~paste(\"Material: \", waste_type, \"<br>Energy Saved: \", total_energy_saved2)) %>%\n  layout(title = \"Total Energy Saved From Waste Disposed Instead of Recycling\",\n         annotations = list(text = \"Possible Energy Saved \",\n                            showarrow = FALSE,\n                            x = 0.5,\n                            y = 0.5,\n                            xref = \"paper\",\n                            yref = \"paper\"))\n\n# Display the plot\nplot\n```    \n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The donut chart visually represents the potential energy savings achievable through recycling various waste types, encompassing food waste. The concentric circles illustrate the proportionate distribution of energy savings, with each segment representing a specific waste category. This insightful visualization provides a clear overview of the comparative contributions of different waste types to the overall potential energy conservation. Specifically, the chart emphasizes the significant role of recycling, including the recycling of food waste, in harnessing and optimizing energy resources. </p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Read the CSV file\ndata <- read.csv('energy_saved_stat.csv')\n\n# Create an interactive scatter plot\nplot <- plot_ly(data, \n                x = ~year, \n                y = ~total_energy_saved, \n                size = ~total_waste_recycled_tonnes,\n                color = ~waste_type,\n                text = ~paste(\"Material: \", waste_type, \"<br>Year: \", year, \"<br>Total Waste Recycled: \", total_waste_recycled_tonnes, \"<br>Total Energy Saved: \", total_energy_saved),\n                sizes = c(5, 100),  # Set the range of point sizes\n                marker = list(sizemode = 'diameter'),\n                hoverinfo = 'text') %>%\n  layout(title = \"Interactive Scatter Plot of Total Energy Saved by Year\",\n         xaxis = list(title = \"Year\"),\n         yaxis = list(title = \"Total Energy Saved\"))\n\n# Display the plot\nplot\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The scatter graph provides a comprehensive perspective on the potential energy savings associated with recycling various types of waste, extending beyond food waste. It highlights the broader impact of recycling, emphasizing the significance of considering diverse materials, such as paper, in our efforts to conserve energy. The placement of data points across the graph effectively communicates the energy-saving potential of different waste materials. The visual representation serves as a compelling reminder that materials often disposed of without much thought, including paper, have substantial contributions to energy conservation when recycled. This graph underscores the importance of holistic waste management practices, encouraging a mindful approach to recycling various materials to maximize overall energy savings.</p>\n</section>\n\")\n```\n\n\n\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n\nfoodWasteData <- read_csv(\"Food Waste data and research - by country.csv\")\n\n# Create new column for combined estimate in tonnes/year\nfoodWasteData <- mutate(foodWasteData, combined_estimate_tonnes_per_year = foodWasteData$`Household estimate (tonnes/year)` + foodWasteData$`Retail estimate (tonnes/year)` + foodWasteData$`Food service estimate (tonnes/year)`)\nfoodWasteData <- foodWasteData[, c(1,2,13,3,4,5,6,7,8,9,10,11,12)]\n\n# Changing column names to make them lowercase and include underscores\nnew_col_names <- c(\"country\", \"combined_estimate_kpcpy\", \"combined_estimate_tpy\", \"household_estimate_kpcpy\", \"household_estimate_tpy\", \"retail_estimate_kpcpy\", \"retail_estimate_tpy\", \"food_service_estimate_kpcpy\", \"food_service_estimate_tpy\", \"estimate_confidence\", \"m49_code\", \"region\", \"source\")\nnames(foodWasteData) <- new_col_names\n\n# Get source column out of the way\ndataSources <- sqldf(\"SELECT country, m49_code, source FROM foodWasteData\")\nfoodWasteData<- foodWasteData[, -13]\n\n# Load dataset linking M49 codes to ISO-alpha3 codes and join with foodWasteData\ncodesData <- read_csv(\"M49.csv\")\nnames(codesData)[names(codesData) == 'M49 code'] <- 'm49_code'\nnames(codesData)[names(codesData) == 'ISO-alpha3 code'] <- 'iso_alpha3_code'\ncodesData <- sqldf(\"SELECT m49_code, iso_alpha3_code FROM codesData\")\nfoodWasteData <- sqldf(\"SELECT * FROM foodWasteData INNER JOIN codesData \n                 ON foodWasteData.m49_code = codesData.m49_code\")\n\n# Join population dataset with foodWasteData using ISO-alpha3 codes\npopulationData <- read_csv(\"2021_population.csv\")\nnames(populationData)[names(populationData) == 'iso_code'] <- 'iso_alpha3_code'\nnames(populationData)[names(populationData) == '2021_last_updated'] <- 'population_2021'\npopulationData <- sqldf(\"SELECT iso_alpha3_code, population_2021 FROM populationData\")\nfoodWasteData <- merge(foodWasteData, populationData, by = \"iso_alpha3_code\", all.x = TRUE)\n# Reorder foodWasteData and remove unnecessary duplicate m49 column\nfoodWasteData <- foodWasteData[, -14]\nfoodWasteData <- foodWasteData[, c(2,3,4,5,6,7,8,9,10,11,12,1,13,14)]\n\n\n# Look for correlation between population size and total food waste\n# Create the scatterplot with a regression line\nggplot(foodWasteData, aes(x = population_2021, y = combined_estimate_tpy)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"blue\") +  # Add regression line\n  labs(\n    title = \"Population vs. Total Food Waste\",\n    x = \"Population (2021)\",\n    y = \"Combined Food Waste Estimate (tonnes/year)\"\n  ) +\n  theme_minimal()\n\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\nfoodWasteData <- read_csv(\"Food Waste data and research - by country.csv\")\n\n# Create new column for combined estimate in tonnes/year\nfoodWasteData <- mutate(foodWasteData, combined_estimate_tonnes_per_year = foodWasteData$`Household estimate (tonnes/year)` + foodWasteData$`Retail estimate (tonnes/year)` + foodWasteData$`Food service estimate (tonnes/year)`)\nfoodWasteData <- foodWasteData[, c(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)]\n\n# Changing column names to make them lowercase and include underscores\nnew_col_names <- c(\"country\", \"combined_estimate_kpcpy\", \"combined_estimate_tpy\", \"household_estimate_kpcpy\", \"household_estimate_tpy\", \"retail_estimate_kpcpy\", \"retail_estimate_tpy\", \"food_service_estimate_kpcpy\", \"food_service_estimate_tpy\", \"estimate_confidence\", \"m49_code\", \"region\", \"source\")\nnames(foodWasteData) <- new_col_names\n\n# Get the source column out of the way\ndataSources <- sqldf(\"SELECT country, m49_code, source FROM foodWasteData\")\nfoodWasteData <- foodWasteData[, -13]\n\n# Load the dataset linking M49 codes to ISO-alpha3 codes and join with foodWasteData\ncodesData <- read_csv(\"M49.csv\")\nnames(codesData)[names(codesData) == 'M49 code'] <- 'm49_code'\nnames(codesData)[names(codesData) == 'ISO-alpha3 code'] <- 'iso_alpha3_code'\ncodesData <- sqldf(\"SELECT m49_code, iso_alpha3_code FROM codesData\")\nfoodWasteData <- sqldf(\"SELECT * FROM foodWasteData INNER JOIN codesData \n                 ON foodWasteData.m49_code = codesData.m49_code\")\n\n# Join the population dataset with foodWasteData using ISO-alpha3 codes\npopulationData <- read_csv(\"2021_population.csv\")\nnames(populationData)[names(populationData) == 'iso_code'] <- 'iso_alpha3_code'\nnames(populationData)[names(populationData) == '2021_last_updated'] <- 'population_2021'\npopulationData <- sqldf(\"SELECT iso_alpha3_code, population_2021 FROM populationData\")\nfoodWasteData <- merge(foodWasteData, populationData, by = \"iso_alpha3_code\", all.x = TRUE)\n# Reorder foodWasteData and remove unnecessary duplicate m49 column\nfoodWasteData <- foodWasteData[, -14]\nfoodWasteData <- foodWasteData[, c(2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 13, 14)]\n\n# Create the scatter plot with a regression line using plotly\nplot_ly(foodWasteData, x = ~population_2021, y = ~combined_estimate_tpy, text = ~paste(\"Country: \", country, \"<br>Population: \", population_2021, \"<br>Food Waste: \", combined_estimate_tpy)) %>%\n  add_markers() %>%\n  add_lines(type = \"scatter\", mode = \"lines\", line = list(color = 'blue')) %>%\n  layout(\n    title = \"Population vs. Total Food Waste\",\n    xaxis = list(title = \"Population (2021)\"),\n    yaxis = list(title = \"Combined Food Waste Estimate (tonnes/year)\")\n  )\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The graph indicates a strong relationship between a country's population size and its total food waste, with an r^2 regression coefficient of approximately 0.966. This implies that 96.6% of the variability in a nation's overall food waste can be accounted for by its population size. These results align precisely with my hypothesis that a country's total food waste is influenced by its population size.\n\nTo conclude, **if every individual takes responsibility and contributes to reducing food waste through recycling and mindful consumption, we have the power to make a significant impact.**\n\nBy doing so, not only can we decrease the amount of food discarded, but we can also save substantial amounts of energy.\n\n<section id=\\\"Zooming into our home country Singapore\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h3 class=\\\"text-center fw-bold my-5\\\">It's a collective effort that holds the key to a more sustainable and energy-efficient future for our planet.</h3>\n  </p>\n</section>\n\")\n```\n\n\n\n\n\n\n\n\n\n","srcMarkdownNoYaml":"\n\n\n```{r setup, include=FALSE}\nlibrary(shiny)\nlibrary(flexdashboard)\nlibrary(tidyverse)\nlibrary(highcharter)\nlibrary(gt)\nlibrary(htmltools)\nlibrary(viridis)\nlibrary(maps)\nlibrary(sf)\nlibrary(ggplot2)\nlibrary(dplyr)\nlibrary(plotly)\nlibrary(quarto)\nlibrary(RColorBrewer)\nlibrary(ggiraph)\nlibrary(readr)\nlibrary(knitr)\nlibrary(sqldf)\n```\n\n```{=html}\n<link rel=\"stylesheet\" href=\"./_site/styles.css\">\n\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n<section class=\\\"image-container\\\">\n  <img src=\\\"delicious-vietnamese-food-including-pho-ga-noodles-spring-rolls-white-table.jpg\\\" style=\\\"width:100%;height:300px;object-fit:cover;\\\"/>\n  <h2 class=\\\"center-text-bg-img\\\">Unveiling the true severity of food waste</h2>\n  <p class=\\\"bottom-right-text-bg-img\\\">Image by [Freepik](https://www.freepik.com/free-photo/delicious-vietnamese-food-including-pho-ga-noodles-spring-rolls-white-table_13702315.htm)</p>\n</section>\n\n<section id=\\\"introduction\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h4 class=\\\"text-center fw-bold my-5\\\">Introduction</h4>\n  <p>Food comes from a long journey, starting with the farmer and ending up in our homes. This journey, called the supply chain, uses a lot of the Earth's resources. When we sit down to eat, we get to enjoy the amazing result. Tradition and good cooking bring us tasty, nourishing, joyful, passionate, and life-giving meals. However, the sad truth is that we throw away a ton of our food—loads of it! And when we do that, we're also tossing away all the valuable resources that were essential to make it in the first place.</p>\n\n  <p>**WASTING FOOD IS WASTING AGRICULTURAL LAND.** The food produced but wasted globally every year requires 1.4 billion hectares of land, which is close to 30% of the world agricultural land area (UNEP, 2022).</p>\n\n  <p>**WASTING FOOD IS WASTING MONEY.** Besides its environmental cost, food wastage also represents a loss of economic value. On a global scale, the economic cost of the overall amount of food wastage is about $US 750 billion, equivalent to the GDP of Switzerland (FAO, 2011).</p>\n\n  <h3 id=\\\"\\\" class=\\\"text-center fw-bold my-5\\\">Wondering how much <div class=\\\"foodwasteword\\\">food is wasted across the world?</div></h3>\n  <p>According to the **United Nations' Food and Agricultural Organisation of United Nation (FAO)**, an estimation of all the food produced every year for human consumption in the world, one-third does not reach our stomachs.</p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\ncreateInteractiveMap <- function(data_file, map_resolution = \"world\") {\n  # Import the data with coordinates\n  world_map <- map_data(map_resolution)\n  accesstonet <- read.csv(data_file)\n  map_data <- accesstonet %>% rename(region = country)\n\n  map <- left_join(world_map, map_data, by = \"region\")\n\n  # Create the ggplot object\n  gg <- ggplot(map, aes(long, lat, group = group, text = paste(\"Country: \", region, \"<br>Annual Kg per Capita: \", FoodWaste2021kgcapitayear))) +\n    geom_polygon(aes(fill = FoodWaste2021kgcapitayear), color = \"white\", size = 0.03) +\n    scale_fill_gradient(low = \"lightgreen\", high = \"darkgreen\") +\n    theme_minimal()\n\n  # Convert ggplot to plotly with specified width and height\n  map_plotly <- ggplotly(gg, tooltip = \"text\", width = 1000, height = 600)\n\n  # Set scrollZoom to FALSE\n  map_plotly$x$layout$updatemenus <- list(list(type = \"zoom\",\nshowactive = FALSE,\nbuttons = list(list(args = list(\"zoomType\", \"zoomin\"),\nlabel = \"Zoom In\",\nmethod = \"relayout\"),\nlist(args = list(\"zoomType\", \"zoomout\"),\nlabel = \"Zoom Out\",\nmethod = \"relayout\")),\ndirection = \"left\",\npad = list(r = 10, t = 87),\nshowactive = FALSE,\ntype = \"buttons\",\nx = 0.1,\ny = 1))\n\n  # Display the interactive map\n  return(map_plotly)\n}\n\n# Interactive Map\ninteractiveMap <- createInteractiveMap(\"food-waste-by-country-2023.csv\")\n\ninteractiveMap\n```\n\n```{r, results='asis', echo=FALSE}\n\ncat(\"\n  <h4 id=\\\"\\\" class=\\\"text-center fw-bold my-5\\\"> <span class=\\\"foodwasteword\\\">WASTING FOOD</span> IS CONTRIBUTING TO <span class=\\\"foodwasteword\\\"> GLOBAL WARMING</span></h4>\n\n\n  \n  <p><p> The carbon footprint of food wasted globally every year is 3.3 billion tonnes of carbon dioxide. **If food waste was a country, it would be the third top emitter after the USA and China (FAO, 2011).**</p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n\n# Load data\nemissions_from_food <- read.csv(\"emissions-from-food.csv\")\n\nemissions_from_food <- emissions_from_food %>% \n  mutate(country = case_when(Entity == \"United States\" ~ \"USA\",\n                             Entity == \"United Kingdom\" ~ \"UK\",\n                             Entity == \"Czechia\" ~ \"Czech Republic\",\n                             Entity == \"Democratic Republic of Congo\" ~ \"Democratic Republic of the Congo\",\n                             TRUE ~ Entity))\n\nworld_map <- map_data(\"world\")\n\nworld_emissions_map <- emissions_from_food %>% \n  filter(country != \"World\") %>% \n  left_join(world_map, by = c(\"country\" = \"region\"))\n\nmap <- world_emissions_map %>% \n  filter(Year == 2015) %>% \n  ggplot(aes(x = long, y = lat, group = group)) +\n  geom_polygon_interactive(aes(fill = `Food_emissions_by_country`, tooltip = `Food_emissions_by_country`), \n                           color = \"black\", size = 0.2) +\n  labs(\n    title = \"Greenhouse gas emisisons from food systems\",\n    caption = \"Source: Crippa et al. (2021). Food systems are responsible for a third of global anthropogenic GHG emissions. \nNature Food.\nOurWorldInData.org/environmental-impacts-of-food ● CC BY\"\n  ) +\n  scale_fill_binned(low = \"darkseagreen1\", high = \"seagreen\", \n                    breaks = c(10000000, 50000000, 100000000, 500000000, 1000000000),\n                    label = c(\"10 million t\", \"50 million t\", \"100 million t\", \"500 million t\", \"1 billion t\"),\n                    guide = guide_colorsteps(barheight = unit(0.1, \"in\"), barwidth = unit(6, \"in\"))) +\n  theme_void() +\n  theme(\n    plot.title = element_text(color = \"gray20\", family = \"serif\", size = 20),\n    plot.caption = element_text(color = \"gray20\", size = 8, hjust = 0),\n    legend.position = \"bottom\",\n    legend.title = element_blank()\n  ) \n\nmap\n```\n\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The map tells us about how much greenhouse gas comes from making and eating food in different countries. In 2021, the countries causing the most emissions, over a billion tons, are the U.S., Brazil, India, Indonesia, and China. These are the same countries that were on the list from 1990 to 2021 for having the most greenhouse gas emissions from their food systems.</p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\nshare_food_emissions <- read_csv(\"share-global-food-emissions.csv\")\n\nshare_emissions_plot <- share_food_emissions %>% \n  filter(Year >= 1990, Entity %in% c(\"China\", \"Indonesia\", \"United States\", \"Brazil\", \n                                     \"India\", \"Argentina\", \"Mexico\")) %>% \n  ggplot(aes(x = Year, y = `Share of global food emissions`, group = Entity, \n             color = fct_reorder2(Entity, Year, `Share of global food emissions`))) +\n  geom_line() +\n  geom_point_interactive(aes(tooltip = `Share of global food emissions`, data_id = Entity)) +\n  labs(    \n    title = \"Share of global food emissions\",\n    subtitle = \"Food system emissions quantified on the basis of food production, not consumption.\",\n    caption = \"Source:OurWorldInData.org/environmental-impacts-of-food ● CC BY\"\n  ) +\n  scale_y_continuous(\n    breaks = c(0, 2, 4, 6, 8, 10, 12, 14),\n    labels = c(\"0\" = \"0%\", \"2\" = \"2%\", \"4\" = \"4%\", \"6\" = \"6%\",\n               \"8\" = \"8%\", \"10\" = \"10%\", \"12\" = \"12%\", \"14\" = \"14%\")\n  ) +\n  theme_minimal() +\n  theme(\n    axis.title = element_blank(),\n    axis.text = element_text(size = 3),\n    legend.title = element_blank(),\n    axis.line.x = element_line(color = \"light gray\", size = 0.75),\n    panel.grid.major.y = element_line(colour = \"light gray\", size=0.5, linetype = \"dashed\"),\n    panel.grid.major.x = element_blank(),\n    plot.margin = margin(1, 1, 1, 1, \"cm\")\n  )\n\ngirafe(ggobj = share_emissions_plot)\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>This chart provides insights into how food production affects the environment, specifically focusing on greenhouse gas emissions. It illustrates the percentage of a country's emissions from food systems in comparison to the global total from 1990 to 2015. China's emissions steadily increased during this period, rising from 10% to 14%, making it the top contributor from 2005 to 2015. Brazil and Indonesia experienced fluctuations but ultimately reduced their shares to around 7% and 9% in 2015. The U.S. contributed between 7.5% and 10%, while India saw a slight increase from 5% to 6%. Argentina maintained a consistent 2%, and Mexico had the smallest share at around 1%. The graph highlights the intricate environmental impact of food systems, involving various activities from farming and land use changes to the entire supply chain, including transportation, packaging, processing, retail, cooking, and waste management. Importantly, these figures focus on emissions tied to food production, emphasizing the need for sustainable practices throughout the entire food production and distribution process to address their environmental impact.</p>\n</section>\n\")\n```\n\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n<section class=\\\"image-container\\\">\n  <img src=\\\"tasty-food-arrangement-top-view.jpg\\\" style=\\\"width:100%;height:300px;object-fit:cover;\\\"/>\n  <h5 class=\\\"center-text-bg-img\\\">Food Waste in Singapore</h5>\n  <p class=\\\"bottom-right-text-bg-img\\\">Image by [Freepik](https://www.freepik.com/free-photo/tasty-food-arrangement-top-view_20552615.htm#query=food%20packages&position=23&from_view=search&track=ais&uuid=93342a26-4a2a-4889-a4e0-fad38046c4af)</p>\n</section>\n\n  <p>We keep asking the Earth for more stuff, make more things, and end up throwing away a lot. We're using up natural resources faster than they can come back, especially to make food that doesn't even get eaten.\n\nRich countries like Singapore are a part of this. The graph shows more and **more food factories** in recent years. When we make **more food**, we also potentially **waste more**.</p>\n</section>\n<section id=\\\"Zooming into our home country Singapore\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h3 class=\\\"text-center fw-bold my-5\\\">Zooming into our home country Singapore</h3>\n\")\n\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Load the required library\nlibrary(plotly)\n\n# Read the CSV file\nfoodfactories_sg <- read.csv(\"LicensedFoodFactoriesEndOfPeriodAnnual.csv\")\n\n# Create an interactive spline plot with points\nspline_plot <- plot_ly(foodfactories_sg, x = ~year, y = ~no_of_food_factories, type = 'scatter', mode = 'lines+markers',\n                       line = list(shape = 'spline'),\n                       text = ~paste(\"Year: \", year, \"<br>No of food factories: \", no_of_food_factories),\n                       hoverinfo = 'text') %>%\n  layout(title = \"Number of Food Factories Over Time (Spline Plot with Points)\",\n         xaxis = list(title = \"Year\"),\n         yaxis = list(title = \"Number of Food Factories\"))\n\n# Display the interactive spline plot with points\nspline_plot\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The graph depicting the number of food factories across the years reveals a consistent upward trend, with a notable increase in 2020 from 1850 to 1940, marking a positive growth pattern. This steady expansion may be indicative of a resilient and growing food industry, potentially influenced by economic factors, population growth, and shifting consumer preferences. The successive yearly increments, such as in 2019 (1850 factories), 2018 (1802), 2017 (1755), and 2016 (1678), underscore a sustained positive trajectory. The substantial rise in 2020 could be linked to increased demand. However, this growth also raises considerations about the potential for food surplus and waste as increased production may outpace demand. </p>\n</section>\n\")\n```\n\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Reading the CSV files\nwaste_03_22 <- read.csv('2003_2022_waste.csv')\n\nenergy_stat <- read.csv('waste_energy_stat.csv')\n\n\n# Renaming columns and mutating the data to convert values from kilo-tonnes to tonnes\nclean_waste_03_22 <- waste_03_22 %>%\n  rename(\n    waste_type = \"waste_type\",\n    total_waste_generated_tonne = \"total_generate_1k_tonnes\",\n    total_waste_recycled_tonne = \"total_recycled_1k_tonnes\",\n    total_waste_not_recycled_tonne = \"total_not_recycled_1k_tonnes\",\n    year = \"year\"\n  ) %>%\n  mutate(\n    total_waste_generated_tonne = total_waste_generated_tonne * 1000,\n    total_waste_recycled_tonne = total_waste_recycled_tonne * 1000\n  )\n\n# Filtering waste_03_22 dataset for specific years and waste types\nwasteselected <- clean_waste_03_22 %>%\n  filter(year %in% 2003:2022,\n         waste_type %in% c(\"Plastics\", \"Ferrous Metals\", \"Non-Ferrous Metals\", \"Glass\", \"Food\"))%>%\n  arrange(waste_type)\n\n  \n### Calculating and adding recycling rate into DataFrame for analysis.\n\n# Calculate recycling_rate and round to 2 decimal places\nclean_waste_03_22$recycling_rate <- round(\n  clean_waste_03_22$total_waste_recycled_tonne / clean_waste_03_22$total_waste_generated_tonne,2\n)\n\n### Calculating and adding wasting rate into DataFrame for analysis.\n\n# Calculate wasting_rate and round to 2 decimal places\nclean_waste_03_22$wasting_rate <- round(\n  1-clean_waste_03_22$recycling_rate,2\n)\n\n# Reading the CSV files\nwaste_03_22 <- read.csv('2003_2022_waste.csv')\n\n# Renaming columns and mutating the data to convert values from kilo-tonnes to tonnes\nclean_waste_03_22 <- waste_03_22 %>%\n  rename(\n    waste_type = \"waste_type\",\n    total_waste_generated_tonne = \"total_generate_1k_tonnes\",\n    total_waste_recycled_tonne = \"total_recycled_1k_tonnes\",\n    total_waste_not_recycled_tonne = \"total_not_recycled_1k_tonnes\",\n    year = \"year\"\n  ) %>%\n  mutate(\n    total_waste_generated_tonne = total_waste_generated_tonne * 1000,\n    total_waste_recycled_tonne = total_waste_recycled_tonne * 1000\n  )\n\n# Define UI for the Shiny app\nui <- fluidPage(\n  titlePanel(\"Waste Visualization App\"),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\"material\", \"Choose Material:\", \n                  choices = unique(clean_waste_03_22$waste_type),\n                  selected = \"Plastics\")\n    ),\n    mainPanel(\n      plotlyOutput(\"waste_plot\")\n    )\n  )\n)\n\n# Define server logic for the Shiny app\nserver <- function(input, output) {\n  \n  # Filter data based on selected material\n  selected_data <- reactive({\n    clean_waste_03_22 %>%\n      filter(waste_type == input$material)\n  })\n  \n  # Render the plot\n  output$waste_plot <- renderPlotly({\n    gg <- ggplot(selected_data(), aes(x = year)) +\n      geom_line(aes(y = total_waste_generated_tonne, color = \"Waste Generated\"), size = 1) +\n      geom_line(aes(y = total_waste_recycled_tonne, color = \"Waste Recycled\"), size = 1) +\n      geom_line(aes(y = total_waste_not_recycled_tonne, color = \"Waste Not Recycled\"), size = 1) +\n      labs(title = paste(\"Waste Over Years -\", input$material),\n           x = \"Year\", y = \"Tonnes\") +\n      theme_minimal()\n    \n    ggplotly(gg, tooltip = \"text\")\n  })\n}\n\n# Run the Shiny app\nshinyApp(ui, server)\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The Shiny interactive chart vividly illustrates the significant impact of food waste as a substantial contributor to overall waste in Singapore. With a considerable amount of food waste being generated, the visualization exposes a concerning trend where a substantial portion is not being effectively recycled. Instead, a high volume of food is disposed of, contributing to environmental concerns. The interactive features of the chart empower users to delve into the intricate details of waste management by exploring and selecting various materials. This exploration unveils the distinct quantities of each material being generated, disposed of, and recycled in Singapore, shedding light on the urgency of addressing food waste management practices for a more sustainable and environmentally conscious future. </p>\n</section>\n\")\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n<section class=\\\"image-container\\\">\n  <img src=\\\"eco-concept-light-bulb-grow-grass.jpg\\\" style=\\\"width:100%;height:300px;object-fit:cover;\\\"/>\n  <h5 class=\\\"center-text-bg-img\\\">Resourceful Waste by Recycling </h5>\n  <p class=\\\"bottom-right-text-bg-img\\\">Image by [Freepik](https://www.freepik.com/free-photo/eco-concept-light-bulb-grow-grass_1010173.htm#query=energy&position=13&from_view=search&track=sph&uuid=c286c868-23bf-4a6f-bba7-5d858706e964)</p>\n</section>\n\n  <p>Imagine the transformative power of a collective commitment to recycling. Let's delve into Singapore's recycling and waste rates, envisioning a future where each small act of recycling contributes to a monumental impact. </p>\n</section>\n<section id=\\\"Zooming into our home country Singapore\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h3 class=\\\"text-center fw-bold my-5\\\">What if we start recycling?</h3>\n\")\n\n```\n\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Read the CSV file\nclean_waste_03_22 <- read.csv('2003_2022_waste.csv') %>%\n  rename(\n    waste_type = \"waste_type\",\n    total_waste_generated_tonne = \"total_generate_1k_tonnes\",\n    total_waste_recycled_tonne = \"total_recycled_1k_tonnes\",\n    total_waste_not_recycled_tonne = \"total_not_recycled_1k_tonnes\",\n    year = \"year\"\n  ) %>%\n  mutate(\n    total_waste_generated_tonne = total_waste_generated_tonne * 1000,\n    total_waste_recycled_tonne = total_waste_recycled_tonne * 1000,\n    recycling_rate = round(total_waste_recycled_tonne / total_waste_generated_tonne, 2),\n    wasting_rate = round(1 - recycling_rate, 2)\n  )\n\n# Define UI for the Shiny app\nui <- fluidPage(\n  titlePanel(\"Recycling and Wasting Rates Visualization App\"),\n  sidebarLayout(\n    sidebarPanel(\n      selectInput(\"material\", \"Choose Material:\",\n                  choices = unique(clean_waste_03_22$waste_type),\n                  selected = \"Plastics\")\n    ),\n    mainPanel(\n      plotlyOutput(\"rate_plot\")\n    )\n  )\n)\n\n# Define server logic for the Shiny app\nserver <- function(input, output) {\n  \n  # Filter data based on selected material\n  selected_data <- reactive({\n    clean_waste_03_22 %>%\n      filter(waste_type == input$material)\n  })\n  \n  # Render the plot\n  output$rate_plot <- renderPlotly({\n    gg <- ggplot(selected_data(), aes(x = year)) +\n      geom_line(aes(y = recycling_rate, color = \"Recycling Rate\"), size = 1) +\n      geom_line(aes(y = wasting_rate, color = \"Wasting Rate\"), size = 1) +\n      labs(title = paste(\"Recycling and Wasting Rates Over Years -\", input$material),\n           x = \"Year\", y = \"Rate\") +\n      theme_minimal()\n    \n    ggplotly(gg, tooltip = \"text\")\n  })\n}\n\n# Run the Shiny app\nshinyApp(ui, server)\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The Shiny interactive chart provides a comprehensive visualization of wasting and recycling rates for various types of waste. Notably, the lines representing the rates for food and plastics reveal a concerning trend—they do not intersect. This lack of intersection indicates that concerted efforts to recycle these common types of waste, namely food and plastics, are currently insufficient. The implications are significant, as effective recycling of these materials could have a substantial positive impact on waste management and environmental sustainability. </p>\n</section>\n\")\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>A bit of information regarding this segment:\n  NUS researchers are at the forefront of addressing Singapore's food waste challenges, with approximately 10% of total waste attributed to discarded food and a recycling rate of around 14%. Headed by Associate Professor Tong Yen Wah from NUS Faculty of Engineering's Department of Chemical and Biomolecular Engineering, a collaboration with Shanghai Jiao Tong University has led to the development of an innovative anaerobic digester system. This system efficiently converts food scraps into electrical energy, heat, and fertilizers, forming a self-sustaining cycle as the generated electricity and heat power the entire process.\n\nOperating like a biochemical stomach, the anaerobic digester breaks down organic matter in an oxygen-free environment. Designed by Dr. Zhang Jingxin from NUS Environmental Research Institute (NERI), the system utilizes anaerobic micro-organisms to convert food waste into biogas, subsequently transformed into heat and electrical energy. The repurposed heat is used to produce hot water, maintaining the optimal temperature for digestion. Every component of the system, from sensors to ventilating fans, is powered by electricity generated within.\n\nAccording to the team's calculations, one tonne of food waste can generate between 200 to 400 kilowatt-hours of electricity, contingent on waste composition. The anaerobic digester also yields nutrient-rich digestate, converting about 80% of fed food waste, which can be further processed into liquid fertilizers for agricultural use. </p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Load the necessary libraries\nlibrary(plotly)\n\n# Read the CSV file\ndata <- read.csv('energy_saved_stat.csv')\n\n# Create an interactive doughnut chart\nplot <- plot_ly(data, \n                labels = ~waste_type, \n                values = ~total_energy_saved2,\n                type = 'pie',\n                hole = 0.4,  # Set the size of the hole for a doughnut effect\n                textinfo = 'label+percent',\n                hoverinfo = 'text+value',\n                text = ~paste(\"Material: \", waste_type, \"<br>Energy Saved: \", total_energy_saved2)) %>%\n  layout(title = \"Total Energy Saved From Waste Disposed Instead of Recycling\",\n         annotations = list(text = \"Possible Energy Saved \",\n                            showarrow = FALSE,\n                            x = 0.5,\n                            y = 0.5,\n                            xref = \"paper\",\n                            yref = \"paper\"))\n\n# Display the plot\nplot\n```    \n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The donut chart visually represents the potential energy savings achievable through recycling various waste types, encompassing food waste. The concentric circles illustrate the proportionate distribution of energy savings, with each segment representing a specific waste category. This insightful visualization provides a clear overview of the comparative contributions of different waste types to the overall potential energy conservation. Specifically, the chart emphasizes the significant role of recycling, including the recycling of food waste, in harnessing and optimizing energy resources. </p>\n</section>\n\")\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n# Read the CSV file\ndata <- read.csv('energy_saved_stat.csv')\n\n# Create an interactive scatter plot\nplot <- plot_ly(data, \n                x = ~year, \n                y = ~total_energy_saved, \n                size = ~total_waste_recycled_tonnes,\n                color = ~waste_type,\n                text = ~paste(\"Material: \", waste_type, \"<br>Year: \", year, \"<br>Total Waste Recycled: \", total_waste_recycled_tonnes, \"<br>Total Energy Saved: \", total_energy_saved),\n                sizes = c(5, 100),  # Set the range of point sizes\n                marker = list(sizemode = 'diameter'),\n                hoverinfo = 'text') %>%\n  layout(title = \"Interactive Scatter Plot of Total Energy Saved by Year\",\n         xaxis = list(title = \"Year\"),\n         yaxis = list(title = \"Total Energy Saved\"))\n\n# Display the plot\nplot\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The scatter graph provides a comprehensive perspective on the potential energy savings associated with recycling various types of waste, extending beyond food waste. It highlights the broader impact of recycling, emphasizing the significance of considering diverse materials, such as paper, in our efforts to conserve energy. The placement of data points across the graph effectively communicates the energy-saving potential of different waste materials. The visual representation serves as a compelling reminder that materials often disposed of without much thought, including paper, have substantial contributions to energy conservation when recycled. This graph underscores the importance of holistic waste management practices, encouraging a mindful approach to recycling various materials to maximize overall energy savings.</p>\n</section>\n\")\n```\n\n\n\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\n\nfoodWasteData <- read_csv(\"Food Waste data and research - by country.csv\")\n\n# Create new column for combined estimate in tonnes/year\nfoodWasteData <- mutate(foodWasteData, combined_estimate_tonnes_per_year = foodWasteData$`Household estimate (tonnes/year)` + foodWasteData$`Retail estimate (tonnes/year)` + foodWasteData$`Food service estimate (tonnes/year)`)\nfoodWasteData <- foodWasteData[, c(1,2,13,3,4,5,6,7,8,9,10,11,12)]\n\n# Changing column names to make them lowercase and include underscores\nnew_col_names <- c(\"country\", \"combined_estimate_kpcpy\", \"combined_estimate_tpy\", \"household_estimate_kpcpy\", \"household_estimate_tpy\", \"retail_estimate_kpcpy\", \"retail_estimate_tpy\", \"food_service_estimate_kpcpy\", \"food_service_estimate_tpy\", \"estimate_confidence\", \"m49_code\", \"region\", \"source\")\nnames(foodWasteData) <- new_col_names\n\n# Get source column out of the way\ndataSources <- sqldf(\"SELECT country, m49_code, source FROM foodWasteData\")\nfoodWasteData<- foodWasteData[, -13]\n\n# Load dataset linking M49 codes to ISO-alpha3 codes and join with foodWasteData\ncodesData <- read_csv(\"M49.csv\")\nnames(codesData)[names(codesData) == 'M49 code'] <- 'm49_code'\nnames(codesData)[names(codesData) == 'ISO-alpha3 code'] <- 'iso_alpha3_code'\ncodesData <- sqldf(\"SELECT m49_code, iso_alpha3_code FROM codesData\")\nfoodWasteData <- sqldf(\"SELECT * FROM foodWasteData INNER JOIN codesData \n                 ON foodWasteData.m49_code = codesData.m49_code\")\n\n# Join population dataset with foodWasteData using ISO-alpha3 codes\npopulationData <- read_csv(\"2021_population.csv\")\nnames(populationData)[names(populationData) == 'iso_code'] <- 'iso_alpha3_code'\nnames(populationData)[names(populationData) == '2021_last_updated'] <- 'population_2021'\npopulationData <- sqldf(\"SELECT iso_alpha3_code, population_2021 FROM populationData\")\nfoodWasteData <- merge(foodWasteData, populationData, by = \"iso_alpha3_code\", all.x = TRUE)\n# Reorder foodWasteData and remove unnecessary duplicate m49 column\nfoodWasteData <- foodWasteData[, -14]\nfoodWasteData <- foodWasteData[, c(2,3,4,5,6,7,8,9,10,11,12,1,13,14)]\n\n\n# Look for correlation between population size and total food waste\n# Create the scatterplot with a regression line\nggplot(foodWasteData, aes(x = population_2021, y = combined_estimate_tpy)) +\n  geom_point() +\n  geom_smooth(method = \"lm\", se = FALSE, color = \"blue\") +  # Add regression line\n  labs(\n    title = \"Population vs. Total Food Waste\",\n    x = \"Population (2021)\",\n    y = \"Combined Food Waste Estimate (tonnes/year)\"\n  ) +\n  theme_minimal()\n\n```\n\n```{r, echo=FALSE, warning=FALSE, message=FALSE}\nfoodWasteData <- read_csv(\"Food Waste data and research - by country.csv\")\n\n# Create new column for combined estimate in tonnes/year\nfoodWasteData <- mutate(foodWasteData, combined_estimate_tonnes_per_year = foodWasteData$`Household estimate (tonnes/year)` + foodWasteData$`Retail estimate (tonnes/year)` + foodWasteData$`Food service estimate (tonnes/year)`)\nfoodWasteData <- foodWasteData[, c(1, 2, 13, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12)]\n\n# Changing column names to make them lowercase and include underscores\nnew_col_names <- c(\"country\", \"combined_estimate_kpcpy\", \"combined_estimate_tpy\", \"household_estimate_kpcpy\", \"household_estimate_tpy\", \"retail_estimate_kpcpy\", \"retail_estimate_tpy\", \"food_service_estimate_kpcpy\", \"food_service_estimate_tpy\", \"estimate_confidence\", \"m49_code\", \"region\", \"source\")\nnames(foodWasteData) <- new_col_names\n\n# Get the source column out of the way\ndataSources <- sqldf(\"SELECT country, m49_code, source FROM foodWasteData\")\nfoodWasteData <- foodWasteData[, -13]\n\n# Load the dataset linking M49 codes to ISO-alpha3 codes and join with foodWasteData\ncodesData <- read_csv(\"M49.csv\")\nnames(codesData)[names(codesData) == 'M49 code'] <- 'm49_code'\nnames(codesData)[names(codesData) == 'ISO-alpha3 code'] <- 'iso_alpha3_code'\ncodesData <- sqldf(\"SELECT m49_code, iso_alpha3_code FROM codesData\")\nfoodWasteData <- sqldf(\"SELECT * FROM foodWasteData INNER JOIN codesData \n                 ON foodWasteData.m49_code = codesData.m49_code\")\n\n# Join the population dataset with foodWasteData using ISO-alpha3 codes\npopulationData <- read_csv(\"2021_population.csv\")\nnames(populationData)[names(populationData) == 'iso_code'] <- 'iso_alpha3_code'\nnames(populationData)[names(populationData) == '2021_last_updated'] <- 'population_2021'\npopulationData <- sqldf(\"SELECT iso_alpha3_code, population_2021 FROM populationData\")\nfoodWasteData <- merge(foodWasteData, populationData, by = \"iso_alpha3_code\", all.x = TRUE)\n# Reorder foodWasteData and remove unnecessary duplicate m49 column\nfoodWasteData <- foodWasteData[, -14]\nfoodWasteData <- foodWasteData[, c(2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 1, 13, 14)]\n\n# Create the scatter plot with a regression line using plotly\nplot_ly(foodWasteData, x = ~population_2021, y = ~combined_estimate_tpy, text = ~paste(\"Country: \", country, \"<br>Population: \", population_2021, \"<br>Food Waste: \", combined_estimate_tpy)) %>%\n  add_markers() %>%\n  add_lines(type = \"scatter\", mode = \"lines\", line = list(color = 'blue')) %>%\n  layout(\n    title = \"Population vs. Total Food Waste\",\n    xaxis = list(title = \"Population (2021)\"),\n    yaxis = list(title = \"Combined Food Waste Estimate (tonnes/year)\")\n  )\n\n```\n\n```{r, results='asis', echo=FALSE}\ncat(\"\n  <p><p>The graph indicates a strong relationship between a country's population size and its total food waste, with an r^2 regression coefficient of approximately 0.966. This implies that 96.6% of the variability in a nation's overall food waste can be accounted for by its population size. These results align precisely with my hypothesis that a country's total food waste is influenced by its population size.\n\nTo conclude, **if every individual takes responsibility and contributes to reducing food waste through recycling and mindful consumption, we have the power to make a significant impact.**\n\nBy doing so, not only can we decrease the amount of food discarded, but we can also save substantial amounts of energy.\n\n<section id=\\\"Zooming into our home country Singapore\\\" class=\\\"container\\\" width=\\\"100%\\\">\n  <h3 class=\\\"text-center fw-bold my-5\\\">It's a collective effort that holds the key to a more sustainable and energy-efficient future for our planet.</h3>\n  </p>\n</section>\n\")\n```\n\n\n\n\n\n\n\n\n\n"},"formats":{"html":{"identifier":{"display-name":"HTML","target-format":"html","base-format":"html"},"execute":{"fig-width":7,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":true,"echo":true,"output":"html_document","warning":true,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"engine":"knitr"},"render":{"keep-tex":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":false,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[],"notebook-links":true,"format-links":true},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","to":"html","toc":true,"reference-location":"margin","css":["styles.css"],"output-file":"finalproject.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items"},"metadata":{"lang":"en","fig-responsive":true,"quarto-version":"1.3.353","preview":{"port":22222,"browser":true,"watch-inputs":true,"navigate":true},"editor":"visual","theme":["theme.scss"],"fontsize":"1.35em","fig-cap-location":"margin","anchor-sections":true,"grid":{"sidebar-width":"100px","body-width":"900px","margin-width":"200px","gutter-width":"1.5rem"},"title":"","runtime":"shiny"},"extensions":{"book":{"multiFile":true}}}},"projectFormats":["html"]}